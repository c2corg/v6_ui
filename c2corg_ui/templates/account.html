<%inherit file="base.html"/>
<%namespace file="helpers/common.html" import="show_title"/>
<%block name="pagetitle"><title ng-bind="mainCtrl.page_title('Account')">${show_title('Account')}</title></%block>

<div class="auth-form">
  <section app-loading>
    <div ng-controller="appAccountController as accountCtrl">
      <h1 translate>Change account parameters</h1>
      <form name="accountForm" novalidate ng-submit="accountCtrl.save()">

        <div class="form-group">
          <label translate>Username</label>
          <input type="text" ng-value="userCtrl.auth.userData.username" class="form-control" disabled />
        </div>

        <div id="account-currentpassword-group" class="form-group" ng-class="{ 'has-error': accountForm.currentpassword.$invalid }">
          <label translate>Current password</label>
          <input type="password" minlength="3" name="currentpassword" ng-model="account.currentpassword" class="form-control" required />
          <div class="help-block" ng-messages="accountForm.currentpassword.$error" ng-if="accountForm.currentpassword.$touched">
            <p ng-message="required" translate>This field is required.</p>
          </div>
        </div>

        <br />

        <div id="account-newpassword-group" class="form-group" ng-class="{ 'has-error': accountForm.newpassword.$touched && accountForm.newpassword.$invalid }">
          <label translate>New password</label>
          <input type="password" minlength="3" name="newpassword" ng-model="account.newpassword" class="form-control" />
        </div>

        <div id="account-email-group" class="form-group" ng-class="{ 'has-error': accountForm.email.$touched && accountForm.email.$invalid }">
          <label translate>Email</label>
          <input type="email" name="email" ng-model="account.email" class="form-control" />
        </div>

        <div id="account-name-group" class="form-group" ng-class="{ 'has-error': accountForm.name.$touched && accountForm.name.$invalid }">
          <label translate>name</label>
          <input type="text" name="name" ng-model="account.name" class="form-control" />
        </div>

        <div id="account-forum_username-group" class="form-group" ng-class="{ 'has-error': accountForm.forum_username.$touched && accountForm.forum_username.$invalid }">
          <label translate>Forum username</label>
          <input type="text" name="forum_username" ng-model="account.forum_username"
            ng-minlength="3" maxlength="25" ng-pattern="/^[\w.-]+$/" class="form-control" />
        </div>

        <div id="account-is_profile_public-group" class="form-group">
          <label>
            <input type="checkbox" name="is_profile_public" ng-model="account.is_profile_public" class="form-control" />
            <span translate>Make profile page public</span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary" ng-disabled="accountForm.$invalid" translate>Save</button>
      </form>
    </div>
  </section>
</div>
