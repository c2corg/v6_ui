<%inherit file="../base.html"/>
<%namespace file="../helpers/common.html" import="show_title"/>
<%namespace file="../helpers/list.html" import="toggle_map_btns, toggle_list_btns"/>

<%block name="pagetitle"><title ng-bind="mainCtrl.page_title('Routes')">${show_title('Routes')}</title></%block>

<%block name="moduleConstantsValues">
  module.value('mapFeatureCollection', null);
  module.value('advancedSearchFilters', {
    'rmaxa': {'type': 'range'},
    'rmina': {'type': 'range'},
    'hdif': {'type': 'range'},
    'ddif': {'type': 'range'},
    'ralt': {'type': 'range'},
    'rappr': {'type': 'range'},
    'dhei': {'type': 'range'},
    'rlen': {'type': 'range'},
    'act': {'type': 'list'},
    'rtyp': {'type': 'list'},
    'crtyp': {'type': 'list'},
    'rock': {'type': 'list'},
    'conf': {'type': 'list'},
    'l': {'type': 'list'},
    'glac': {'type': 'list'},
    'fac': {'type': 'orientations'},
    'sltyp': {'type': 'list'},
  });
</%block>

## for 'click' of .toggle-map, .page-main-title button and .show-documents-filters-phone
## see js/style/stickyFilters.js

<header class="page-main-title">
  <h3><span translate>Routes</span>
    <span class="badge" ng-cloak>{{resCounter}}</span>
  </h3>
</header>
<div class="documents-list-section-container" ng-class="{'no-map': MapswitchCtrl.hideMap, 'no-list': noList, 'row-list' : switchCtrl.showList}">
  <section class="documents-list-section">
    <%include file="filters.html" />

    <div class="documents-nav-buttons text-center">
      <button class="btn btn-default orange-btn show-documents-filters-phone" translate>Filters</button>
      <c2c-doctype-selector c2c-doctype="routes"></c2c-doctype-selector>
      <c2c-list-switch></c2c-list-switch>
      <c2c-map-switch></c2c-map-switch>
      <button class="btn btn-default orange-btn" protected-url-btn url="${request.route_path('routes_add')}"
              uib-tooltip="{{'Create a new route' | translate }}" tooltip-placement="right">
        <span class="glyphicon glyphicon-plus-sign"></span>
      </button>
      ${toggle_list_btns()}

      <c2c-pagination></c2c-pagination>
      <div class="toggle-map">
        <button class="btn btn-default"><span class="glyphicon glyphicon-globe"></span></button>
      </div>
    </div>

    <c2c-advanced-search document-type="routes" use-map="true"></c2c-advanced-search>

    <div class="documents-nav-buttons text-center footer-pagination">
      <c2c-pagination></c2c-pagination>
    </div>
  </section>

  <div class="map-right">
    ${toggle_map_btns()}
    <c2c-map c2c-map-advanced-search="true" c2c-map-show-recenter-tools="true" c2c-map-default-map-filter="true"></c2c-map>
  </div>
</div>
