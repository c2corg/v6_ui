<%namespace file="../../helpers/view.html" import="get_document_min_max, show_areas, show_attr, show_maps"/>

## MAPSINFO
<%def name="get_waypoint_maps_info(waypoint)">\
  % if waypoint.get('maps_info') or waypoint.get('maps'):
    <div class="name-icon-value maps" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>maps_info</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-globe"></span>
        <p translate>maps_info</p>
      </div>
      <span class="detail-text accordion">
        % if waypoint.get('maps_info'):
          <p><span translate>maps_info</span>: <span>${waypoint['maps_info']}</span></p>
        % endif
        
        ${show_maps(waypoint)}
      </span>
    </div>
  % endif
</%def>

## GENERAL
<%def name="get_waypoint_general(waypoint)">\
<div class="name-icon-value general" ng-click="detailsCtrl.openTab($event)">
  <h4><span translate>General</span><span class="glyphicon glyphicon-menu-right"></span></h4>
  <div class="name-icon">
    <span class="glyphicon glyphicon-info-sign"></span>
    <p translate>General</p>
  </div>
  <span class="detail-text accordion">
    % if waypoint.get('waypoint_type'):
      <p><span translate class="value-title">waypoint_type</span>: <span x-translate class="value">${waypoint['waypoint_type']}</span></p>
    % endif

    % if waypoint.get('orientation'):
      <p>
        <span translate>orientation</span>:
       ${', '.join(waypoint['orientation'])}
      </p>
    % endif

    % if waypoint.get('climbing_indoor_types'):
      <article ng-init="climbing_indoor_types = ${waypoint['climbing_indoor_types']}">
        <span translate class="value-title">climbing_indoor_types</span><br>
        <span x-translate ng-repeat="type in climbing_indoor_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('rock_types'):
      <article ng-init="rock_types = ${waypoint['rock_types']}">
        <span translate class="value-title">rock_types</span><br>
        <span x-translate ng-repeat="type in rock_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('climbing_outdoor_types') and waypoint['climbing_outdoor_types'][0] != '':
      <article ng-init="climbing_outdoor_types = ${waypoint['climbing_outdoor_types']}">
        <span translate class="value-title">climbing_outdoor_types</span><br>
        <span x-translate ng-repeat="type in climbing_outdoor_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('product_types'):
      <article ng-init="product_types = ${waypoint['product_types']}">
        <span translate class="value-title">product_types</span><br>
        <span x-translate ng-repeat="type in product_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('ground_types'):
      <article ng-init="ground_types = ${waypoint['ground_types']}">
        <span translate class="value-title">ground_types</span><br>
        <span x-translate ng-repeat="type in ground_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('weather_station_types'):
      <article ng-init="weather_station_types = ${waypoint['weather_station_types']}">
        <span translate class="value-title">weather_station_types</span><br>
        <span x-translate ng-repeat="type in weather_station_types" class="value">{{type}}{{$last ? '' : ', '}}</span>
      </article>
    % endif

    % if waypoint.get('rain_proof'):
    <p><span translate class="value-title">rain_proof</span>: <span x-translate  class="value">${waypoint['rain_proof']}</span></p>
    % endif

    % if waypoint.get('children_proof'):
    <p><span translate class="value-title">children_proof</span>: <span x-translate class="value">${waypoint['children_proof']}</span></p>
    % endif

    % if waypoint.get('capacity'):
    <p><span translate class="value-title">capacity</span>: <span  class="value">${waypoint['capacity']}</span></p>
    % endif

    % if waypoint.get('capacity_staffed'):
    <p><span translate class="value-title">capacity_staffed</span>: <span  class="value">${waypoint['capacity_staffed']}</span></p>
    % endif

    % if waypoint.get('length'):
    <p><span translate class="value-title">length</span>: <span  class="value">${waypoint['length']} m</span></p>
    % endif

  </span>
</div>
</%def>

## LOCATION
<%def name="get_waypoint_location(waypoint, geometry4326)">\
<div class="name-icon-value location" ng-click="detailsCtrl.openTab($event)">
  <h4><span translate>Location</span><span class="glyphicon glyphicon-menu-right"></span></h4>
  <div class="name-icon">
    <span class="glyphicon glyphicon-map-marker"></span>
    <p translate>Location</p>
  </div>
  <span class="detail-text accordion">
    % if not version:
      ${show_areas(waypoint)}
    % endif
    <p>${round(geometry4326.x)} °E / ${round(geometry4326.y)} °N</p>
  </span>
</div>
</%def>

## HEIGHTS
<%def name="get_waypoint_heights(waypoint)">\

  % if waypoint.get('elevation') and ( waypoint.get('prominence') or waypoint.get('elevation_min') \
    or waypoint.get('height_min')  or waypoint.get('height_max') \
    or waypoint.get('prominence')  or waypoint.get('height_median') ):
    
    <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>heights</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-map-marker"></span>
        <p translate>heights</p>
      </div>
      <span class="detail-text accordion">

        % if waypoint.get('prominence'):
          <p><span translate class="value-title">prominence</span>: <span class="value">${waypoint['prominence']} m</span></p>
        % endif

        % if waypoint.get('elevation_min'):
          <p><span translate class="value-title">elevation_min</span>: <span class="value">${waypoint['elevation_min']} m</span></p>
        % endif

        % if waypoint.get('elevation'):
          <p class="show-phone elevation"><span translate class="value-title">elevation</span>: <span class="value">${waypoint['elevation']} m</span></p>
        % endif

        ${get_document_min_max(waypoint, 'height')}

        % if waypoint.get('height_median'):
          <p><span translate class="value-title">height_median</span>: <span class="value">${waypoint['height_median']} m</span></p>
        % endif

      </span>
    </div>
  % endif
</%def>

## ACCESS
<%def name="get_waypoint_access(waypoint, locale)">\
  % if locale.get('access_period') or waypoint.get('access_period') or waypoint.get('access_time') or \
   waypoint.get('best_periods') or  waypoint.get('public_transportation_types') or  waypoint.get('public_transportation_rating') or \
   waypoint.get('parking_fee') or waypoint.get('snow_clearance_rating') or waypoint.get('lift_access') or waypoint.get('routes_quantity') :

  <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
    <h4><span translate>Access</span><span class="glyphicon glyphicon-menu-right"></span></h4>
    <div class="name-icon">
      <span class="glyphicon glyphicon-road"></span>
      <p translate>Access</p>
    </div>
    <span class="detail-text accordion">

      % if locale.get('access_period'):
        <p><span translate class="value-title">access_period</span>: <span class="value">${locale['access_period']}</span></p>
      % endif

      % if waypoint.get('routes_quantity'):
        <p><span translate class="value-title">routes_quantity</span>: <span class="value">${waypoint['routes_quantity']}</span></p>
      % endif

      % if waypoint.get('access_time'):
        <p><span translate class="value-title">access_time</span>: <span class="value">${waypoint['access_time']}</span></p>
      % endif
      
      % if waypoint.get('best_periods'):
      <article ng-init="best_periods = ${waypoint['best_periods']}">
        <span translate class="value-title">best_periods</span><br>
        <span x-translate ng-repeat="type in best_periods">{{type}}{{$last ? '' : ', '}}</span>
      </article>
      % endif
      
      % if waypoint.get('public_transportation_types'):
      <article ng-init="public_transportation_types = ${waypoint['public_transportation_types']}" class="value">
        <span translate class="value-title">public_transportation_types</span><br>
        <span x-translate ng-repeat="type in public_transportation_types">{{type}}{{$last ? '' : ', '}}</span>
      </article>
      % endif
      
      % if waypoint.get('public_transportation_rating'):
        <p><span translate class="value-title">public_transportation_rating</span>: <span class="value">${waypoint['public_transportation_rating']}</span></p>
      % endif

      % if waypoint.get('parking_fee'):
        <p><span translate class="value-title">parking_fee</span>: <span class="value">${waypoint['parking_fee']}</span></p>
      % endif

      % if waypoint.get('snow_clearance_rating'):
        <p><span translate class="value-title">snow_clearance_rating</span>: <span class="value">${waypoint['snow_clearance_rating']}</span></p>
      % endif

      % if waypoint.get('lift_access'):
      <span translate class="value-title">lift_access</span>
      <input type="checkbox" checked="checked"><span></span>
      % endif
    </span>
  </div>
 % endif
</%def>

## RATING  
<%def name="get_waypoint_rating(waypoint)">\
  % if waypoint.get('climbing_rating_max') or waypoint.get('risk_rating') or waypoint.get('climbing_rating_median') or waypoint.get('equipment_ratings') or  waypoint.get('paragliding_rating') or waypoint.get('exposition_rating') :
    <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>Rating</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-sort-by-attributes"></span>
        <p translate>Rating</p>
      </div>
      <span class="detail-text accordion">
        
        % if waypoint.get('risk_rating'):
        <p><span translate class="value-title">risk_rating</span>: <span class="value">${waypoint['risk_rating']}</span></p>
        % endif
        
        % if waypoint.get('climbing_rating_max'):
        <p><span translate class="value-title">climbing_rating_max</span>: <span class="value">${waypoint['climbing_rating_max']}</span></p>
        % endif

        % if waypoint.get('climbing_rating_min'):
        <p><span translate class="value-title">climbing_rating_min</span>: <span class="value">${waypoint['climbing_rating_min']}</span></p>
        % endif

        % if waypoint.get('climbing_rating_median'):
        <p><span translate class="value-title">climbing_rating_median</span>: <span class="value">${waypoint['climbing_rating_median']}</span></p>
        % endif

        % if waypoint.get('equipment_ratings'):
        <p><span translate class="value-title">equipment_rating</span>: <span class="value">${waypoint['equipment_ratings']}</span></p>
        % endif

        % if waypoint.get('paragliding_rating'):
        <p><span translate class="value-title">paragliding_rating</span>: <span class="value">${waypoint['paragliding_rating']}</span></p>
        % endif

        % if waypoint.get('exposition_rating'):
          <p><span translate class="value-title">exposition_rating</span>: <span class="value">${waypoint['exposition_rating']}</span></p>
        % endif
      </span>
    </div>
  % endif
</%def>

## STYLE  
<%def name="get_waypoint_style(waypoint)">\
  % if waypoint.get('climbing_styles'):
    <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>Style</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-sunglasses"></span>
        <p translate>Style</p>
      </div>
      <span class="detail-text accordion">
        
        % if waypoint.get('climbing_styles'):
        <article ng-init="climbing_styles = ${waypoint['climbing_styles']}">
          <span translate class="value-title">climbing_styles</span><br>
          <span x-translate ng-repeat="style in climbing_styles" class="value">{{style}}{{$last ? '' : ', '}}</span>
        </article>
        % endif
        
      </span>
    </div>
  % endif
</%def>

## CONTACT  
<%def name="get_waypoint_contact(waypoint)">\
  % if waypoint.get('url') and waypoint.get('phone') and waypoint.get('phone_custodian') and waypoint.get('custodianship') :
    <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>Contact</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-phone-alt"></span>
        <p translate>Contact</p>
      </div>
      <span class="detail-text accordion">

        % if waypoint.get('url'):
          <p><span translate class="value-title">url</span> :<span class="value">${waypoint['url']}</span></p>
        % endif

        % if waypoint.get('phone'):
          <p><span translate class="value-title">phone</span>: <span class="value"> ${waypoint['phone']}</span></p>
        % endif

        % if waypoint.get('phone_custodian'):
          <p><span translate class="value-title">phone_custodian</span>: <span class="value">${waypoint['phone_custodian']}</span></p>
        % endif

        % if waypoint.get('custodianship'):
          <p><span translate class="value-title">custodianship</span>: <span class="value">${waypoint['custodianship']}</span></p>
        % endif

      </span>
    </div>
  % endif
</%def>

## EQUIPMENT  
<%def name="get_waypoint_equipment(waypoint)">\
  % if waypoint.get('matress_unstaffed') or  waypoint.get('gas_unstaffed') or waypoint.get('heating_unstaffed') or waypoint.get('blanket_unstaffed') :
    <div class="name-icon-value" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>Equipment</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-cutlery"></span>
        <p translate>Equipment</p>
      </div>
      <span class="detail-text accordion">

        % if waypoint.get('matress_unstaffed'):
        <div class="checkbox">
          <input type="checkbox" ng-checked="true">
          <span x-translate class="value-title">matress_unstaffed</span>
        </div>
        % endif

        % if waypoint.get('blanket_unstaffed'):
        <div class="checkbox">
          <input type="checkbox" ng-checked="true">
          <span x-translate class="value-title">blanket_unstaffed</span>
        </div>
        % endif

        % if waypoint.get('heating_unstaffed'):
        <div class="checkbox">
          <input type="checkbox" ng-checked="true">
          <span x-translate class="value-title">heating_unstaffed</span>
        </div>
        % endif

        % if waypoint.get('gas_unstaffed'):
        <div class="checkbox">
          <input type="checkbox" ng-checked="true">
          <span x-translate class="value-title">gas_unstaffed</span>
        </div>
        % endif

      </span>
    </div>
  % endif
</%def>

## ORIENTATION  
<%def name="get_waypoint_orientation(waypoint)">\
  % if waypoint.get('orientation') :
    <div class="name-icon-value orientation" ng-click="detailsCtrl.openTab($event)">
      <h4><span translate>orientation</span><span class="glyphicon glyphicon-menu-right"></span></h4>
      <div class="name-icon">
        <span class="glyphicon glyphicon-move"></span>
        <p translate>orientation</p>
      </div>
      <span class="detail-text accordion" id="detail-orientation" ng-init="waypoint.orientation = ${waypoint.get('orientation')}">
        <%include file="c2corg_ui:static/img/orientation.svg" />
        <p id="orientation-list">${', '.join(waypoint['orientation'])}</p>
      </span>

    </div>
  % endif
</%def>